use std::{fmt::Display, iter::once};
use unicode_normalization::{is_nfkc_quick, IsNormalized, UnicodeNormalization};

fn unicode_char_to_tex(c: char) -> Option<String> {
    let shift = |character: char, base: char, ascii_base: char| {
        char::from_u32(u32::from(character) - u32::from(base) + u32::from(ascii_base)).unwrap()
    };
    let symbol = |s: &str| Some(format!(r"\{}", s));
    let combine = |op: &str, arg: &dyn Display| Some(format!(r"\{}{{ {} }}", op, arg));
    let combine2 = |op1: &str, op2: &str, arg: &dyn Display| {
        Some(format!(r"\{}{{ \{}{{ {} }} }}", op1, op2, arg))
    };
    match c {
        // - ASCII
        'A'..='Z' | 'a'..='z' => Some(c.to_string()),
        '!' | ',' | ';' | '?' | '@' | '*' | '+' | '-' | ':' | '<' | '=' | '>' | '|' => {
            Some(c.to_string())
        }
        '$' | '%' | '&' => symbol(&c.to_string()),
        '~' => symbol("sim"),

        // - Styled alphabets
        //   - Mathematical Bold
        'ð€'..='ð™' => combine("mathbf", &shift(c, 'ð€', 'A')),
        'ðš'..='ð³' => combine("mathbf", &shift(c, 'ðš', 'a')),
        'ðŸŽ'..='ðŸ—' => combine("mathbf", &shift(c, 'ðŸŽ', '0')),

        //   - Mathematical Italic
        'ð´'..='ð‘' => combine("mathit", &shift(c, 'ð´', 'A')),
        'ð‘Ž'..='ð‘§' => combine("mathit", &shift(c, 'ð‘Ž', 'a')),
        'â„Ž' => combine("mathit", &'h'),

        //   - Mathematical Bold Italic
        'ð‘¨'..='ð’' => combine("bm", &shift(c, 'ð‘¨', 'A')),
        'ð’‚'..='ð’›' => combine("bm", &shift(c, 'ð’‚', 'a')),

        //   - Mathematical Script
        'ð’œ'..='ð’µ' => combine("mathscr", &shift(c, 'ð’œ', 'A')),
        'ð’¶'..='ð“' => combine("mathscr", &shift(c, 'ð’¶', 'a')),
        'â„¬' => combine("mathscr", &'B'),
        'â„°' => combine("mathscr", &'E'),
        'â„±' => combine("mathscr", &'F'),
        'â„‹' => combine("mathscr", &'H'),
        'â„' => combine("mathscr", &'I'),
        'â„’' => combine("mathscr", &'L'),
        'â„³' => combine("mathscr", &'M'),
        'â„›' => combine("mathscr", &'R'),
        'â„¯' => combine("mathscr", &'e'),
        'â„Š' => combine("mathscr", &'g'),
        'â„´' => combine("mathscr", &'o'),

        //   - Mathematical Bold Script
        'ð“'..='ð“©' => combine2("bm", "mathscr", &shift(c, 'ð“', 'A')),
        'ð“ª'..='ð”ƒ' => combine2("bm", "mathscr", &shift(c, 'ð“ª', 'a')),

        //   - Mathematical Fraktur
        'ð”„'..='ð”œ' => combine("mathfrak", &shift(c, 'ð”„', 'A')),
        'ð”ž'..='ð”·' => combine("mathfrak", &shift(c, 'ð”ž', 'a')),
        'â„­' => combine("mathfrak", &'C'),
        'â„Œ' => combine("mathfrak", &'H'),
        'â„‘' => combine("mathfrak", &'I'),
        'â„œ' => combine("mathfrak", &'R'),
        'â„¨' => combine("mathfrak", &'Z'),

        //   - Mathematical Double-Struck
        'ð”¸'..='ð•' => combine("mathbb", &shift(c, 'ð”¸', 'A')),
        'ð•’'..='ð•«' => combine("mathbb", &shift(c, 'ð•’', 'a')),
        'ðŸ˜'..='ðŸ¡' => combine("mathbb", &shift(c, 'ðŸ˜', '0')),
        'â„‚' => combine("mathbb", &'C'),
        'â„' => combine("mathbb", &'H'),
        'â„•' => combine("mathbb", &'N'),
        'â„™' => combine("mathbb", &'P'),
        'â„š' => combine("mathbb", &'Q'),
        'â„' => combine("mathbb", &'R'),
        'â„¤' => combine("mathbb", &'Z'),

        //   - Mathematical Bold Fraktur => Mathematical Fraktur
        'ð•¬'..='ð–…' => combine("mathfrak", &shift(c, 'ð•¬', 'A')),
        'ð–†'..='ð–Ÿ' => combine("mathfrak", &shift(c, 'ð–†', 'a')),

        //   - Mathematical Sans-Serif
        'ð– '..='ð–¹' => combine("mathsf", &shift(c, 'ð– ', 'A')),
        'ð–º'..='ð—“' => combine("mathsf", &shift(c, 'ð–º', 'a')),
        'ðŸ¢'..='ðŸ«' => combine("mathsf", &shift(c, 'ðŸ¢', '0')),
        'ð—”'..='ð—­' => combine("mathsf", &shift(c, 'ð—”', 'A')),
        'ð—®'..='ð˜‡' => combine("mathsf", &shift(c, 'ð—®', 'a')),
        'ð˜ˆ'..='ð˜¡' => combine("mathsf", &shift(c, 'ð˜ˆ', 'A')),
        'ð˜¢'..='ð˜»' => combine("mathsf", &shift(c, 'ð˜¢', 'a')),
        'ð˜¼'..='ð™•' => combine("mathsf", &shift(c, 'ð˜¼', 'A')),
        'ð™–'..='ð™¯' => combine("mathsf", &shift(c, 'ð™–', 'a')),
        'ðŸ¬'..='ðŸµ' => combine("mathsf", &shift(c, 'ðŸ¬', '0')),

        //   - Mathematical Monospace
        'ð™°'..='ðš‰' => combine("mathtt", &shift(c, 'ð™°', 'A')),
        'ðšŠ'..='ðš£' => combine("mathtt", &shift(c, 'ðšŠ', 'a')),
        'ðŸ¶'..='ðŸ¿' => combine("mathtt", &shift(c, 'ðŸ¶', '0')),

        // - Greek alphabets
        'Î‘' => symbol("Alpha"),
        'Î’' => symbol("Beta"),
        'Î“' => symbol("Gamma"),
        'Î”' => symbol("Delta"),
        'Î•' => symbol("Epsilon"),
        'Î–' => symbol("Zeta"),
        'Î—' => symbol("Eta"),
        'Î˜' | 'Ï´' => symbol("Theta"),
        'Î™' => symbol("Iota"),
        'Îš' => symbol("Kappa"),
        'Î›' => symbol("Lambda"),
        'Îœ' => symbol("Mu"),
        'Î' => symbol("Nu"),
        'Îž' => symbol("Xi"),
        'ÎŸ' => symbol("Omicron"),
        'Î ' => symbol("Pi"),
        'Î¡' => symbol("Rho"),
        'Î£' => symbol("Sigma"),
        'Î¤' => symbol("Tau"),
        'Î¥' => symbol("Upsilon"),
        'Î¦' => symbol("Phi"),
        'Î§' => symbol("Chi"),
        'Î¨' => symbol("Psi"),
        'Î©' => symbol("Omega"),
        'Î±' => symbol("alpha"),
        'Î²' => symbol("beta"),
        'Î³' => symbol("gamma"),
        'Î´' => symbol("delta"),
        'Îµ' => symbol("varepsilon"),
        'Î¶' => symbol("zeta"),
        'Î·' => symbol("eta"),
        'Î¸' => symbol("theta"),
        'Î¹' => symbol("iota"),
        'Îº' => symbol("kappa"),
        'Î»' => symbol("lambda"),
        'Î¼' => symbol("mu"),
        'Î½' => symbol("nu"),
        'Î¾' => symbol("xi"),
        'Î¿' => symbol("omicron"),
        'Ï€' => symbol("pi"),
        'Ï' => symbol("rho"),
        'Ï‚' => symbol("varsigma"),
        'Ïƒ' => symbol("sigma"),
        'Ï„' => symbol("tau"),
        'Ï…' => symbol("upsilon"),
        'Ï†' => symbol("varphi"),
        'Ï‡' => symbol("chi"),
        'Ïˆ' => symbol("psi"),
        'Ï‰' => symbol("omega"),
        'Ïµ' => symbol("epsilon"),
        'Ï‘' => symbol("vartheta"),
        'Ï°' => symbol("varkappa"),
        'Ï•' => symbol("phi"),
        'Ï±' => symbol("varrho"),
        'Ï–' => symbol("varpi"),
        'Ï' => symbol("digamma"),

        //   - Italic
        'ð›¢'..='ð›²' => unicode_char_to_tex(shift(c, 'ð›¢', 'Î‘')),
        'ð›³' => symbol("Theta"),
        'ð›´'..='ð›º' => unicode_char_to_tex(shift(c, 'ð›´', 'Î£')),
        'ð›¼'..='ðœ”' => unicode_char_to_tex(shift(c, 'ð›¼', 'Î±')),
        'ðœ–' => symbol("epsilon"),
        'ðœ—' => symbol("vartheta"),
        'ðœ˜' => symbol("varkappa"),
        'ðœ™' => symbol("phi"),
        'ðœš' => symbol("varrho"),
        'ðœ›' => symbol("varpi"),

        //   - Bold
        'ðš¨'..='ðš¸' => combine("bm", &unicode_char_to_tex(shift(c, 'ðš¨', 'Î‘'))?),
        'ðœœ'..='ðœ¬' => combine("bm", &unicode_char_to_tex(shift(c, 'ðœœ', 'Î‘'))?),
        'ð–'..='ð¦' => combine("bm", &unicode_char_to_tex(shift(c, 'ð–', 'Î‘'))?),
        'ðž'..='ðž ' => combine("bm", &unicode_char_to_tex(shift(c, 'ðž', 'Î‘'))?),
        'ðš¹' | 'ðœ­' | 'ð§' | 'ðž¡' => combine("bm", &symbol("Theta")?),
        'ðšº'..='ð›€' => combine("bm", &unicode_char_to_tex(shift(c, 'ðšº', 'Î£'))?),
        'ðœ®'..='ðœ´' => combine("bm", &unicode_char_to_tex(shift(c, 'ðœ®', 'Î£'))?),
        'ð¨'..='ð®' => combine("bm", &unicode_char_to_tex(shift(c, 'ð¨', 'Î£'))?),
        'ðž¢'..='ðž¨' => combine("bm", &unicode_char_to_tex(shift(c, 'ðž¢', 'Î£'))?),
        'ð›‚'..='ð›š' => combine("bm", &unicode_char_to_tex(shift(c, 'ð›‚', 'Î±'))?),
        'ðœ¶'..='ðŽ' => combine("bm", &unicode_char_to_tex(shift(c, 'ðœ¶', 'Î±'))?),
        'ð°'..='ðžˆ' => combine("bm", &unicode_char_to_tex(shift(c, 'ð°', 'Î±'))?),
        'ðžª'..='ðŸ‚' => combine("bm", &unicode_char_to_tex(shift(c, 'ðžª', 'Î±'))?),
        'ð›œ' | 'ð' | 'ðžŠ' | 'ðŸ„' => combine("bm", &symbol("epsilon")?),
        'ð›' | 'ð‘' | 'ðž‹' | 'ðŸ…' => combine("bm", &symbol("vartheta")?),
        'ð›ž' | 'ð’' | 'ðžŒ' | 'ðŸ†' => combine("bm", &symbol("varkappa")?),
        'ð›Ÿ' | 'ð“' | 'ðž' | 'ðŸ‡' => combine("bm", &symbol("phi")?),
        'ð› ' | 'ð”' | 'ðžŽ' | 'ðŸˆ' => combine("bm", &symbol("varrho")?),
        'ð›¡' | 'ð•' | 'ðž' | 'ðŸ‰' => combine("bm", &symbol("varpi")?),
        'ðŸ‹' => combine("bm", &symbol("digamma")?),

        // - Symbols
        'ð›»' => symbol("nabla"),
        'ðœ•' => symbol("partial"),
        'ð›' | 'ðœµ' | 'ð¯' | 'ðž©' => combine("bm", &symbol("nabla")?),
        'ð››' | 'ð' | 'ðž‰' | 'ðŸƒ' => combine("bm", &symbol("partial")?),
        'ðš¤' => symbol("imath"),
        'Ä±' => combine("text", &symbol("i")?),
        'ðš¥' => symbol("jmath"),
        'È·' => combine("text", &symbol("j")?),
        'Â±' => symbol("pm"),
        'Ã—' => symbol("times"),
        'Ã·' => symbol("div"),
        'â€ ' => symbol("dagger"),
        'â€¡' => symbol("ddagger"),
        'â€¦' => symbol("ldots"),
        'Ä§' => symbol("hbar"),
        'â„' => symbol("hslash"),
        'â„²' => symbol("Finv"),
        'â„µ' => symbol("aleph"),
        'â„¶' => symbol("beth"),
        'â„·' => symbol("gimel"),
        'â„¸' => symbol("daleth"),
        'â…' => symbol("Game"),
        'â†' => symbol("leftarrow"),
        'â†‘' => symbol("uparrow"),
        'â†’' => symbol("rightarrow"),
        'â†“' => symbol("downarrow"),
        'â†”' => symbol("leftrightarrow"),
        'â†•' => symbol("updownarrow"),
        'â†–' => symbol("nwarrow"),
        'â†—' => symbol("nearrow"),
        'â†˜' => symbol("searrow"),
        'â†™' => symbol("swarrow"),
        'â†ž' => symbol("twoheadleftarrow"),
        'â† ' => symbol("twoheadrightarrow"),
        'â†¢' => symbol("leftarrowtail"),
        'â†£' => symbol("rightarrowtail"),
        'â†¦' => symbol("mapsto"),
        'â†©' => symbol("hookleftarrow"),
        'â†ª' => symbol("hookrightarrow"),
        'â†«' => symbol("looparrowleft"),
        'â†¬' => symbol("looparrowright"),
        'â†­' => symbol("leftrightsquigarrow"),
        'â†°' => symbol("Lsh"),
        'â†±' => symbol("Rsh"),
        'â†¶' => symbol("curvearrowleft"),
        'â†·' => symbol("curvearrowright"),
        'â†º' => symbol("circlearrowleft"),
        'â†»' => symbol("circlearrowright"),
        'â†¼' => symbol("leftharpoonup"),
        'â†½' => symbol("leftharpoondown"),
        'â†¾' => symbol("upharpoonright"),
        'â†¿' => symbol("upharpoonleft"),
        'â‡€' => symbol("rightharpoonup"),
        'â‡' => symbol("rightharpoondown"),
        'â‡‚' => symbol("downharpoonright"),
        'â‡ƒ' => symbol("downharpoonleft"),
        'â‡„' => symbol("rightleftarrows"),
        'â‡†' => symbol("leftrightarrows"),
        'â‡‡' => symbol("leftleftarrows"),
        'â‡ˆ' => symbol("upuparrows"),
        'â‡‰' => symbol("rightrightarrows"),
        'â‡Š' => symbol("downdownarrows"),
        'â‡‹' => symbol("leftrightharpoons"),
        'â‡Œ' => symbol("rightleftharpoons"),
        'â‡' => symbol("Leftarrow"),
        'â‡‘' => symbol("Uparrow"),
        'â‡’' => symbol("Rightarrow"),
        'â‡“' => symbol("Downarrow"),
        'â‡”' => symbol("Leftrightarrow"),
        'â‡•' => symbol("Updownarrow"),
        'â‡š' => symbol("Lleftarrow"),
        'â‡›' => symbol("Rrightarrow"),
        'â‡' => symbol("rightsquigarrow"),
        'âˆ€' => symbol("forall"),
        'âˆ' => symbol("complement"),
        'âˆ‚' => symbol("partial"),
        'âˆƒ' => symbol("exists"),
        'âˆ…' => symbol("empty"),
        'âˆ†' => combine("mathop", &symbol("Delta")?),
        'âˆ‡' => symbol("nabla"),
        'âˆˆ' => symbol("in"),
        'âˆŠ' => symbol("in"),
        'âˆ‹' => symbol("ni"),
        'âˆ' => symbol("ni"),
        'âˆŽ' => symbol("blacksquare"),
        'âˆ' => symbol("prod"),
        'âˆ' => symbol("coprod"),
        'âˆ‘' => symbol("sum"),
        'âˆ’' => unicode_char_to_tex('-'),
        'âˆ“' => symbol("mp"),
        'âˆ”' => symbol("dotplus"),
        'âˆ–' => symbol("setminus"),
        'âˆ—' => symbol("ast"),
        'âˆ˜' => symbol("circ"),
        'âˆ™' => symbol("cdot"),
        'âˆ' => symbol("propto"),
        'âˆž' => symbol("infty"),
        'âˆ ' => symbol("angle"),
        'âˆ¡' => symbol("measuredangle"),
        'âˆ¢' => symbol("sphericalangle"),
        'âˆ£' => symbol("mid"),
        'âˆ¥' => symbol("parallel"),
        'âˆ§' => symbol("wedge"),
        'âˆ¨' => symbol("vee"),
        'âˆ©' => symbol("cap"),
        'âˆª' => symbol("cup"),
        'âˆ«' => symbol("int"),
        'âˆ¬' => symbol("iint"),
        'âˆ­' => symbol("iiint"),
        'âˆ®' => symbol("oint"),
        'âˆ¯' => symbol("oiint"),
        'âˆ°' => symbol("oiiint"),
        'âˆ´' => symbol("therefore"),
        'âˆµ' => symbol("because"),
        'âˆ·' => symbol("coloncolon"),
        'âˆ¼' => symbol("sim"),
        'âˆ½' => symbol("backsim"),
        'â‰€' => symbol("wr"),
        'â‰‚' => symbol("eqsim"),
        'â‰ƒ' => symbol("simeq"),
        'â‰…' => symbol("cong"),
        'â‰ˆ' => symbol("approx"),
        'â‰Š' => symbol("approxeq"),
        'â‰' => symbol("asymp"),
        'â‰Ž' => symbol("Bumpeq"),
        'â‰' => symbol("bumpeq"),
        'â‰' => symbol("doteq"),
        'â‰‘' => symbol("Doteq"),
        'â‰’' => symbol("fallingdotseq"),
        'â‰“' => symbol("risingdotseq"),
        'â‰”' => symbol("coloneq"),
        'â‰•' => symbol("eqcolon"),
        'â‰–' => symbol("eqcirc"),
        'â‰—' => symbol("circeq"),
        'â‰œ' => symbol("triangleq"),
        'â‰¡' => symbol("equiv"),
        'â‰¤' => symbol("leq"),
        'â‰¥' => symbol("geq"),
        'â‰¦' => symbol("leqq"),
        'â‰§' => symbol("geqq"),
        'â‰¨' => symbol("lneqq"),
        'â‰©' => symbol("gneqq"),
        'â‰ª' => symbol("ll"),
        'â‰«' => symbol("gg"),
        'â‰¬' => symbol("between"),
        'â‰²' => symbol("lesssim"),
        'â‰³' => symbol("gtrsim"),
        'â‰¶' => symbol("lessgtr"),
        'â‰·' => symbol("gtrless"),
        'â‰º' => symbol("prec"),
        'â‰»' => symbol("succ"),
        'â‰¼' => symbol("preccurlyeq"),
        'â‰½' => symbol("succcurlyeq"),
        'â‰¾' => symbol("precsim"),
        'â‰¿' => symbol("succsim"),
        'âŠ‚' => symbol("subset"),
        'âŠƒ' => symbol("supset"),
        'âŠ†' => symbol("subseteq"),
        'âŠ‡' => symbol("supseteq"),
        'âŠŠ' => symbol("subsetneq"),
        'âŠ‹' => symbol("supsetneq"),
        'âŠŽ' => symbol("uplus"),
        'âŠ' => symbol("sqsubset"),
        'âŠ' => symbol("sqsupset"),
        'âŠ‘' => symbol("sqsubseteq"),
        'âŠ’' => symbol("sqsupseteq"),
        'âŠ“' => symbol("sqcap"),
        'âŠ”' => symbol("sqcup"),
        'âŠ•' => symbol("oplus"),
        'âŠ–' => symbol("ominus"),
        'âŠ—' => symbol("otimes"),
        'âŠ˜' => symbol("oslash"),
        'âŠ™' => symbol("odot"),
        'âŠš' => symbol("circledcirc"),
        'âŠ›' => symbol("circledast"),
        'âŠ' => symbol("circleddash"),
        'âŠž' => symbol("boxplus"),
        'âŠŸ' => symbol("boxminus"),
        'âŠ ' => symbol("boxtimes"),
        'âŠ¡' => symbol("boxdot"),
        'âŠ¢' => symbol("vdash"),
        'âŠ£' => symbol("dashv"),
        'âŠ¤' => symbol("top"),
        'âŠ¥' => symbol("bot"),
        'âŠ§' => symbol("models"),
        'âŠ¨' => symbol("vDash"),
        'âŠ©' => symbol("Vdash"),
        'âŠª' => symbol("Vvdash"),
        'âŠ²' => symbol("vartriangleleft"),
        'âŠ³' => symbol("vartriangleright"),
        'âŠ´' => symbol("trianglelefteq"),
        'âŠµ' => symbol("trianglerighteq"),
        'âŠ¶' => symbol("origof"),
        'âŠ·' => symbol("image"),
        'âŠ¸' => symbol("multimap"),
        'âŠº' => symbol("intercal"),
        'âŠ»' => symbol("veebar"),
        'âŠ¼' => symbol("barwedge"),
        'â‹€' => symbol("bigwedge"),
        'â‹' => symbol("bigvee"),
        'â‹‚' => symbol("bigcap"),
        'â‹ƒ' => symbol("bigcup"),
        'â‹„' => symbol("diamond"),
        'â‹…' => symbol("cdot"),
        'â‹†' => symbol("star"),
        'â‹‡' => symbol("divideontimes"),
        'â‹ˆ' => symbol("bowtie"),
        'â‹‰' => symbol("ltimes"),
        'â‹Š' => symbol("rtimes"),
        'â‹‹' => symbol("leftthreetimes"),
        'â‹Œ' => symbol("rightthreetimes"),
        'â‹' => symbol("backsimeq"),
        'â‹Ž' => symbol("curlyvee"),
        'â‹' => symbol("curlywedge"),
        'â‹' => symbol("Subset"),
        'â‹‘' => symbol("Supset"),
        'â‹’' => symbol("Cap"),
        'â‹“' => symbol("Cup"),
        'â‹”' => symbol("pitchfork"),
        'â‹–' => symbol("lessdot"),
        'â‹—' => symbol("gtrdot"),
        'â‹˜' => symbol("llless"),
        'â‹™' => symbol("ggg"),
        'â‹š' => symbol("lesseqgtr"),
        'â‹›' => symbol("gtreqless"),
        'â‹ž' => symbol("curlyeqprec"),
        'â‹Ÿ' => symbol("curlyeqsucc"),
        'â‹¦' => symbol("lnsim"),
        'â‹§' => symbol("gnsim"),
        'â‹¨' => symbol("precnsim"),
        'â‹©' => symbol("succnsim"),
        'â‹®' => symbol("vdots"),
        'â‹¯' => symbol("cdots"),
        'â‹±' => symbol("ddots"),
        'âŒ¢' => symbol("frown"),
        'âŒ£' => symbol("smile"),
        'â—¯' => symbol("bigcirc"),
        'âŸµ' => symbol("longleftarrow"),
        'âŸ¶' => symbol("longrightarrow"),
        'âŸ·' => symbol("longleftrightarrow"),
        'âŸ¸' => symbol("Longleftarrow"),
        'âŸ¹' => symbol("Longrightarrow"),
        'âŸº' => symbol("iff"),
        'âŸ¼' => symbol("longmapsto"),
        'â¨€' => symbol("bigodot"),
        'â¨' => symbol("bigoplus"),
        'â¨‚' => symbol("bigotimes"),
        'â¨„' => symbol("biguplus"),
        'â¨†' => symbol("bigsqcup"),
        'â¨¿' => symbol("amalg"),
        'â©´' => symbol("Coloneq"),
        'â©½' => symbol("leqslant"),
        'â©¾' => symbol("geqslant"),
        'âª…' => symbol("lessapprox"),
        'âª†' => symbol("gtrapprox"),
        'âª‡' => symbol("lneq"),
        'âªˆ' => symbol("gneq"),
        'âª‰' => symbol("lnapprox"),
        'âªŠ' => symbol("gnapprox"),
        'âª‹' => symbol("lesseqqgtr"),
        'âªŒ' => symbol("gtreqqless"),
        'âª•' => symbol("eqslantless"),
        'âª–' => symbol("eqslantgtr"),
        'âª¯' => symbol("preceq"),
        'âª°' => symbol("succeq"),
        'âªµ' => symbol("precneqq"),
        'âª¶' => symbol("succneqq"),
        'âª·' => symbol("precapprox"),
        'âª¸' => symbol("succapprox"),
        'âª¹' => symbol("precnapprox"),
        'âªº' => symbol("succnapprox"),
        'â«…' => symbol("subseteqq"),
        'â«†' => symbol("supseteqq"),
        'â«‹' => symbol("subsetneqq"),
        'â«Œ' => symbol("supsetneqq"),

        'âˆ¸' => Some(r"\dot{ - }".to_string()),
        'â‰†' => Some(r"\mathrel{ \widetilde{ \ne } }".to_string()),
        'â‰˜' => Some(r"\stackrel{ \frown }{ = }".to_string()),
        'â‰™' => Some(r"\stackrel{ \wedge }{ = }".to_string()),
        'â‰š' => Some(r"\stackrel{ \vee }{ = }".to_string()),
        'â‰›' => Some(r"\stackrel{ \star }{ = }".to_string()),
        'â‰' => Some(r"\stackrel{ \mathrm{def} }{ = }".to_string()),
        'â‰ž' => Some(r"\stackrel{ \mathrm{m} }{ = }".to_string()),
        'â‰Ÿ' => Some(r"\stackrel{ ? }{ = }".to_string()),
        'âŠ½' => combine("bar", &symbol("vee")?),
        'â‹µ' => Some(r"\dot{ \in }".to_string()),
        'â‹¶' | 'â‹·' => Some(r"\bar{ \in }".to_string()),
        'â‹¸' => Some(r"\underline{ \in }".to_string()),
        'â‹½' | 'â‹¾' => Some(r"\bar{ \ni }".to_string()),

        //   - unsupported
        'Ã°' | 'â‡ ' | 'â‡¢' | 'âˆŸ' | 'âˆº' | 'âˆ»' | 'âŠ«' | 'â‹œ' | 'â‹' | 'â‹¤' | 'â‹¥' | 'â‹°' | 'â‹²' | 'â‹³' | 'â‹´'
        | 'â‹¹' | 'â‹º' | 'â‹»' | 'â‹¼' | 'â‹¿' => None,

        // TODO: 'âˆ¶', 'âˆ¹', 'âŠ¦'
        _ => match is_nfkc_quick(once(c)) {
            IsNormalized::Yes => None,
            _ => unicode_char_to_tex(once(c).nfkc().next()?),
        },
    }
}

fn unicode_accent_to_tex() -> String {
    "aaa".to_string()
}

fn unicode_sub_to_ascii() -> String {
    "aaa".to_string()
}

fn unicode_sup_to_ascii() -> String {
    "aaa".to_string()
}
fn main() {
    assert_eq!(1, 1);
}
